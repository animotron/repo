<?xml version="1.0" encoding="UTF-8"?>
<the:part-generator-service xmlns:is="animo/relation/is" xmlns:have="animo/relation/have" xmlns:any="animo/query" xmlns:an="animo/reference" xmlns:the="animo/instance">
    <is:service/>
    <an:html-part>
        <have:content>
            <do:xquery xmlns:do="animo/perform">
                let $part-context := $context/self::the:*
                
                for $c in $part-context[last()]
                let $form-id := local-name($c)
                let $id := concat("uuid-", util:uuid())
                return
                <div xmlns="http://www.w3.org/1999/xhtml">
                    <fieldset>
                        <legend>{
                            element {"get:name"} {
                                element {concat("an:", $form-id)} {}
                            }
                        }</legend>
                        {generator:generate-fields($c, "")}
                        <input type="hidden" name="the:{$form-id}/id" value="{$id}"/>
                    </fieldset>
                    <id>{$id}</id>
                </div>
            </do:xquery>
        </have:content>
    </an:html-part>
</the:part-generator-service>