<?xml version="1.0" encoding="UTF-8"?>
<the:irc-log-viewer xmlns:is="animo/relation/is" xmlns:have="animo/relation/have" xmlns:an="animo/reference" xmlns:do="animo/perform" xmlns:the="animo/instance">
    <article>
        <label xmlns="http://www.w3.org/1999/xhtml">IRC log viewer</label>
        <do:xquery>

element {QName("http://www.w3.org/1999/xhtml", "table")} {
	element {QName("http://www.w3.org/1999/xhtml", "tr")} {
		element {QName("http://www.w3.org/1999/xhtml", "th")} {
			"time"
		},
		element {QName("http://www.w3.org/1999/xhtml", "th")} {
			"nickname"
		},
		element {QName("http://www.w3.org/1999/xhtml", "th")} {
			"message"
		}
	},
	for $message in collection("/db/irc-log")/message[@to eq "#animotron"]
	return
		element {QName("http://www.w3.org/1999/xhtml", "tr")} {
			element {QName("http://www.w3.org/1999/xhtml", "td")} {
				attribute {"align"} {"left"},
				xsl:format-dateTime(xs:dateTime($message/*:delay/@stamp), "H:m:s")
			},
			element {QName("http://www.w3.org/1999/xhtml", "td")} {
				attribute {"align"} {"right"},
				$message/@from/string()
			},
			element {QName("http://www.w3.org/1999/xhtml", "td")} {
				$message/body/string()
			}
		}
}

		</do:xquery>
    </article>
    <menu/>
    <updates/>
    <account/>
</the:irc-log-viewer>